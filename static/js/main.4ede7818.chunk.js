(this.webpackJsonpTrelloKanban=this.webpackJsonpTrelloKanban||[]).push([[0],{19:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(12),d=n.n(r),i=(n(19),n(6)),s=n.n(i),o=n(4),l=n(8),u=n(5),b=n(39),j=n(40),f=n(41),x=n(37),O=function(e){if(!e)return"";var t=new Date(e);if(!t)return"";return t.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]},v=["#a8193d","#4fcc25","#1ebffa","#8da377","#9975bd","#cf61a1","#240959"],p=n(32),m=n(0);function h(e){var t=e.item,n=e.removeLabel;return Object(m.jsxs)("label",{style:{backgroundColor:t.color,color:"#fff"},children:[t.text,n&&Object(m.jsx)(p.a,{onClick:function(){return n(t)}})]})}n(24);var k=function(e){var t=Object(a.useRef)(),n=function(n){var a;t&&!(null===(a=t.current)||void 0===a?void 0:a.contains(n.target))&&e.onClose&&e.onClose()};return Object(a.useEffect)((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}})),Object(m.jsx)("div",{ref:t,className:"dropdown custom-scroll ".concat(e.class?e.class:""),children:e.children})},N=(n(25),n(3)),C=n(33),g=n(34),I=n(35),D=n(36),S=n(38);n(26);var E=function(e){return Object(m.jsx)("div",{className:"modal",onClick:function(){return e.onClose?e.onClose():""},children:Object(m.jsx)("div",{className:"modal-content custom-scroll",onClick:function(e){return e.stopPropagation()},children:e.children})})};n(27);var y=function(e){var t=e.text,n=e.onSubmit,c=e.displayClass,r=e.editClass,d=e.placeholder,i=e.defaultValue,s=e.buttonText,o=Object(a.useState)(!1),l=Object(u.a)(o,2),b=l[0],j=l[1],f=Object(a.useState)(i||""),x=Object(u.a)(f,2),O=x[0],v=x[1];return Object(m.jsx)("div",{className:"custom-input",children:b?Object(m.jsxs)("form",{className:"custom-input-edit ".concat(r||""),onSubmit:function(e){e.preventDefault(),O&&n&&(v(""),n(O)),j(!1)},children:[Object(m.jsx)("input",{type:"text",value:O,placeholder:d||t,onChange:function(e){return v(e.target.value)},autoFocus:!0}),Object(m.jsxs)("div",{className:"custom-input-edit-footer",children:[Object(m.jsx)("button",{type:"submit",children:s||"Add"}),Object(m.jsx)(p.a,{onClick:function(){return j(!1)},className:"closeIcon"})]})]}):Object(m.jsx)("p",{className:"custom-input-display ".concat(c||""),onClick:function(){return j(!0)},children:t})})};n(28);var w=function(e){var t,n,c=e.onClose,r=e.card,d=e.boardId,i=e.updateCard,s=Object(a.useState)(""),l=Object(u.a)(s,2),b=l[0],j=l[1],f=Object(a.useState)(Object(N.a)({},r)),O=Object(u.a)(f,2),p=O[0],k=O[1],w=function(e){var t=p.labels.filter((function(t){return t.text!==e.text}));k(Object(N.a)(Object(N.a)({},p),{},{labels:t}))};Object(a.useEffect)((function(){i&&i(d,p.id,p)}),[p]);var T=function(){var e,t,n,a;return(null===(e=p.tasks)||void 0===e?void 0:e.length)?(null===(t=p.tasks)||void 0===t||null===(n=t.filter((function(e){return e.completed})))||void 0===n?void 0:n.length)/(null===(a=p.tasks)||void 0===a?void 0:a.length)*100:0}();return Object(m.jsx)(E,{onClose:c,children:Object(m.jsxs)("div",{className:"cardinfo",children:[Object(m.jsxs)("div",{className:"cardinfo-box",children:[Object(m.jsxs)("div",{className:"cardinfo-box-title",children:[Object(m.jsx)(C.a,{}),Object(m.jsx)("p",{children:"Title"})]}),Object(m.jsx)(y,{defaultValue:p.title,text:p.title,placeholder:"Enter Title",onSubmit:function(e){k(Object(N.a)(Object(N.a)({},p),{},{title:e}))}})]}),Object(m.jsxs)("div",{className:"cardinfo-box",children:[Object(m.jsxs)("div",{className:"cardinfo-box-title",children:[Object(m.jsx)(g.a,{}),Object(m.jsx)("p",{children:"Description"})]}),Object(m.jsx)(y,{defaultValue:p.desc,text:p.desc||"Add a Description",placeholder:"Enter description",onSubmit:function(e){k(Object(N.a)(Object(N.a)({},p),{},{desc:e}))}})]}),Object(m.jsxs)("div",{className:"cardinfo-box",children:[Object(m.jsxs)("div",{className:"cardinfo-box-title",children:[Object(m.jsx)(I.a,{}),Object(m.jsx)("p",{children:"Date"})]}),Object(m.jsx)("input",{type:"date",defaultValue:p.date,min:(new Date).toISOString().substr(0,10),onChange:function(e){var t;(t=e.target.value)&&k(Object(N.a)(Object(N.a)({},p),{},{date:t}))}})]}),Object(m.jsxs)("div",{className:"cardinfo-box",children:[Object(m.jsxs)("div",{className:"cardinfo-box-title",children:[Object(m.jsx)(D.a,{}),Object(m.jsx)("p",{children:"Labels"})]}),Object(m.jsx)("div",{className:"cardinfo-box-labels",children:null===(t=p.labels)||void 0===t?void 0:t.map((function(e,t){return Object(m.jsx)(h,{item:e,removeLabel:w},t)}))}),Object(m.jsx)("ul",{children:v.map((function(e,t){return Object(m.jsx)("li",{style:{backgroundColor:e},className:b===e?"li-active":"",onClick:function(){return j(e)}},t)}))}),Object(m.jsx)(y,{text:"Add Label",placeholder:"Enter label text",onSubmit:function(e){return t={color:b,text:e},void(p.labels.findIndex((function(e){return e.text===t.text}))>-1||(j(""),k(Object(N.a)(Object(N.a)({},p),{},{labels:[].concat(Object(o.a)(p.labels),[t])}))));var t}})]}),Object(m.jsxs)("div",{className:"cardinfo-box",children:[Object(m.jsxs)("div",{className:"cardinfo-box-title",children:[Object(m.jsx)(x.a,{}),Object(m.jsx)("p",{children:"Tasks"})]}),Object(m.jsx)("div",{className:"cardinfo-box-progress-bar",children:Object(m.jsx)("div",{className:"cardinfo-box-progress",style:{width:"".concat(T,"%"),backgroundColor:100===T?"limegreen":""}})}),Object(m.jsx)("div",{className:"cardinfo-box-task-list",children:null===(n=p.tasks)||void 0===n?void 0:n.map((function(e){return Object(m.jsxs)("div",{className:"cardinfo-box-task-checkbox",children:[Object(m.jsx)("input",{type:"checkbox",defaultChecked:e.completed,onChange:function(t){return function(e,t){var n=Object(o.a)(p.tasks),a=n.findIndex((function(t){return t.id===e}));a<0||(n[a].completed=Boolean(t),k(Object(N.a)(Object(N.a)({},p),{},{tasks:n})))}(e.id,t.target.checked)}}),Object(m.jsx)("p",{className:e.completed?"completed":"",children:e.text}),Object(m.jsx)(S.a,{onClick:function(){return function(e){var t=Object(o.a)(p.tasks).filter((function(t){return t.id!==e}));k(Object(N.a)(Object(N.a)({},p),{},{tasks:t}))}(e.id)}})]},e.id)}))}),Object(m.jsx)(y,{text:"Add a Task",placeholder:"Enter task",onSubmit:function(e){var t={id:Date.now()+2*Math.random(),completed:!1,text:e};k(Object(N.a)(Object(N.a)({},p),{},{tasks:[].concat(Object(o.a)(p.tasks),[t])}))}})]})]})})};var T=function(e){var t,n=e.card,c=e.boardId,r=e.removeCard,d=e.onDragEnd,i=e.onDragEnter,s=e.updateCard,o=n.id,l=n.title,v=n.desc,p=n.date,N=n.tasks,C=n.labels,g=Object(a.useState)(!1),I=Object(u.a)(g,2),D=I[0],S=I[1],E=Object(a.useState)(!1),y=Object(u.a)(E,2),T=y[0],A=y[1];return Object(m.jsxs)(m.Fragment,{children:[T&&Object(m.jsx)(w,{onClose:function(){return A(!1)},card:n,boardId:c,updateCard:s}),Object(m.jsxs)("div",{className:"card",draggable:!0,onDragEnd:function(){return d(c,o)},onDragEnter:function(){return i(c,o)},onClick:function(){return A(!0)},children:[Object(m.jsxs)("div",{className:"card-top",children:[Object(m.jsx)("div",{className:"card-top-labels",children:null===C||void 0===C?void 0:C.map((function(e,t){return Object(m.jsx)(h,{item:e},t)}))}),Object(m.jsxs)("div",{className:"card-top-more",onClick:function(e){e.stopPropagation(),S(!0)},children:[Object(m.jsx)(b.a,{}),D&&Object(m.jsx)(k,{class:"board-dropdown",onClose:function(){return S(!1)},children:Object(m.jsx)("p",{onClick:function(){return r(c,o)},children:"Delete Card"})})]})]}),Object(m.jsx)("div",{className:"card-title",children:l}),Object(m.jsx)("div",{children:Object(m.jsx)("p",{title:v,children:Object(m.jsx)(j.a,{})})}),Object(m.jsxs)("div",{className:"card-footer",children:[p&&Object(m.jsxs)("p",{className:"card-footer-item",children:[Object(m.jsx)(f.a,{className:"card-footer-icon"}),O(p)]}),N&&(null===N||void 0===N?void 0:N.length)>0&&Object(m.jsxs)("p",{className:"card-footer-item",children:[Object(m.jsx)(x.a,{className:"card-footer-icon"}),null===N||void 0===N||null===(t=N.filter((function(e){return e.completed})))||void 0===t?void 0:t.length,"/",null===N||void 0===N?void 0:N.length]})]})]},n.id)]})};n(29);var A=function(e){var t,n,c=e.board,r=e.addCard,d=e.removeBoard,i=e.removeCard,s=e.onDragEnd,o=e.onDragEnter,l=e.updateCard,j=Object(a.useState)(!1),f=Object(u.a)(j,2),x=f[0],O=f[1];return Object(m.jsx)("div",{className:"board",children:Object(m.jsxs)("div",{className:"board-inner",children:[Object(m.jsxs)("div",{className:"board-header",children:[Object(m.jsxs)("p",{className:"board-header-title",children:[null===c||void 0===c?void 0:c.title,Object(m.jsx)("span",{children:(null===c||void 0===c||null===(t=c.cards)||void 0===t?void 0:t.length)||0})]}),Object(m.jsxs)("div",{className:"board-header-title-more",onClick:function(){return O(!0)},children:[Object(m.jsx)(b.a,{}),x&&Object(m.jsx)(k,{class:"board-dropdown",onClose:function(){return O(!1)},children:Object(m.jsx)("p",{onClick:function(){return d(null===c||void 0===c?void 0:c.id)},children:"Delete Board"})})]})]}),Object(m.jsxs)("div",{className:"board-cards custom-scroll",children:[null===c||void 0===c||null===(n=c.cards)||void 0===n?void 0:n.map((function(e){return Object(m.jsx)(T,{card:e,boardId:c.id,removeCard:i,onDragEnter:o,onDragEnd:s,updateCard:l},e.id)})),Object(m.jsx)(y,{text:"+ Add Card",placeholder:"Enter Card Title",displayClass:"board-add-card",editClass:"board-add-card-edit",onSubmit:function(e){return r(null===c||void 0===c?void 0:c.id,e)}})]})]},null===c||void 0===c?void 0:c.id)})},B=(n(30),n(13)),L=n(14),J=[{id:1651319512266.7095,title:"Discover",cards:[{id:1651319552926.0933,title:"Task1",labels:[{color:"#cf61a1",text:"Urgent"}],date:"2022-05-05",tasks:[{id:1651319625559.8025,completed:!0,text:"Task1_subtask1"},{id:1651319629650.8945,completed:!0,text:"Task1_subtask2"},{id:1651319633774.9905,completed:!0,text:"Task1_subtask3"}],desc:"Task1 Detail Description"},{id:1651319568365.593,title:"Task2",labels:[{color:"#1ebffa",text:"Frontend"}],date:"",tasks:[]}]},{id:1651319523126.113,title:"Doing",cards:[{id:1651319672685.5078,title:"Task3",labels:[{color:"#9975bd",text:"Database"}],date:"",tasks:[{id:1651319728301.3855,completed:!1,text:"restore db"}]}]},{id:1651319530017.122,title:"In-Review",cards:[{id:1651319677070.0732,title:"Task4",labels:[{color:"#8da377",text:"figma"}],date:"2022-05-06",tasks:[]}]},{id:1651319535931.4182,title:"Completed",cards:[{id:1651319680948.0479,title:"Task5",labels:[{color:"#4fcc25",text:"Payment API"}],date:"2022-05-04",tasks:[{id:1651319820180.9648,completed:!1,text:"GraphQl"},{id:1651319833779.3252,completed:!0,text:"Restful API"}]}]}],M="kanban-boards",P=function(){function e(){Object(B.a)(this,e)}return Object(L.a)(e,[{key:"fetchBoardList",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=J,n=[],localStorage.getItem(M)?(c=JSON.parse(null!==(a=localStorage.getItem(M))&&void 0!==a?a:""),n=Object(o.a)(c)):K(n=Object(o.a)(t)),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function F(){return V.apply(this,arguments)}function V(){return(V=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new P,e.abrupt("return",t.fetchBoardList());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){localStorage.setItem(M,JSON.stringify(e))}var R=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1];function r(){return(r=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){r.apply(this,arguments)}()}),[]);var d=Object(a.useState)({boardId:0,cardId:0}),i=Object(u.a)(d,2),b=i[0],j=i[1],f=function(e,t){var a=n.findIndex((function(t){return t.id===e}));if(!(a<0)){var r=Object(o.a)(n);r[a].cards.push({id:Date.now()+2*Math.random(),title:t,labels:[],date:"",tasks:[],desc:""}),c(r)}},x=function(e,t){var a=n.findIndex((function(t){return t.id===e}));if(!(a<0)){var r=Object(o.a)(n),d=r[a].cards,i=d.findIndex((function(e){return e.id===t}));i<0||(d.splice(i,1),c(r))}},O=function(e,t,a){var r=n.findIndex((function(t){return t.id===e}));if(!(r<0)){var d=Object(o.a)(n),i=d[r].cards.findIndex((function(e){return e.id===t}));i<0||(d[r].cards[i]=a,c(d))}},v=function(e,t){var a,r,d,i,s=n.findIndex((function(t){return t.id===e}));if(!(s<0)){var l=null===(a=n[s])||void 0===a||null===(r=a.cards)||void 0===r?void 0:r.findIndex((function(e){return e.id===t}));if(!(l<0)){var u=n.findIndex((function(e){return e.id===b.boardId}));if(!(u<0)){var f=null===(d=n[u])||void 0===d||null===(i=d.cards)||void 0===i?void 0:i.findIndex((function(e){return e.id===b.cardId}));if(!(f<0)){var x=Object(o.a)(n),O=x[s].cards[l];x[s].cards.splice(l,1),x[u].cards.splice(f,0,O),c(x),j({boardId:0,cardId:0})}}}}},p=function(e,t){b.cardId!==t&&j({boardId:e,cardId:t})};return Object(a.useEffect)((function(){K(n)}),[n]),Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)("div",{className:"app-nav",children:Object(m.jsx)("h1",{children:"\u0415\u0449\u0435 \u043e\u0434\u043d\u0430 Kanban - \u0434\u043e\u0441\u043a\u0430"})}),Object(m.jsx)("div",{className:"app-boards-container",children:Object(m.jsxs)("div",{className:"app-boards",children:[n.map((function(e){return Object(m.jsx)(A,{board:e,addCard:f,removeBoard:function(){return function(e){var t=n.findIndex((function(t){return t.id===e}));if(!(t<0)){var a=Object(o.a)(n);a.splice(t,1),c(a)}}(e.id)},removeCard:x,onDragEnd:v,onDragEnter:p,updateCard:O},e.id)})),Object(m.jsx)("div",{className:"app-boards-last",children:Object(m.jsx)(y,{displayClass:"app-boards-add-board",editClass:"app-boards-add-board-edit",placeholder:"Enter Board Name",text:"Add Board",buttonText:"Add Board",onSubmit:function(e){var t=Object(o.a)(n);t.push({id:Date.now()+2*Math.random(),title:e,cards:[]}),c(t)}})})]})})]})};var _=function(){return Object(m.jsx)(R,{})};d.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(_,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.4ede7818.chunk.js.map